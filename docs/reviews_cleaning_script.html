
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Reviews Data Cleaning &#8212; Topic Modelling And Sentiment Analysis For Oberoi Delhi</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lemmatizing Review Data" href="lemmetization_script.html" />
    <link rel="prev" title="Data Pre Processing And Cleaning" href="data_cleaning_script.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Topic Modelling And Sentiment Analysis For Oberoi Delhi</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Tripadvisor Reviews - Oberoi Delhi
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="scraping_script.html">
   Scraping Review Data From TripAdvisor
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data_cleaning_script.html">
   Data Pre Processing And Cleaning
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Reviews Data Cleaning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lemmetization_script.html">
   Lemmatizing Review Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="eda_script.html">
   EDA
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="topic_modelling.html">
   Topic Modelling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sentiment_analysis.html">
   Sentiment Classifier And Analysis
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/AalokAtre/Oberoi_Delhi/master?urlpath=tree/docs/docs/reviews_cleaning_script.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/AalokAtre/Oberoi_Delhi"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/AalokAtre/Oberoi_Delhi/issues/new?title=Issue%20on%20page%20%2Fdocs/reviews_cleaning_script.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/docs/reviews_cleaning_script.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Reviews Data Cleaning</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="reviews-data-cleaning">
<h1>Reviews Data Cleaning<a class="headerlink" href="#reviews-data-cleaning" title="Permalink to this headline">#</a></h1>
<p>Punctuation and casing within reviews is an hindrance for language processing as they pollute the dataset with their dominance and redundancies, as such we lowercase the entire review dataset and remove all the punctuation. Customer reviews also contain a lot of words that have little / no value in topic modelling or sentiment analysis. These words called the stopwords should be removed from the dataset before we perform any kind of analysis. We use a combination of pre built python packages and custom defined stopwords to clean our reviews.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import pandas as pd
from textblob import Word
from gensim.parsing.preprocessing import remove_stopwords
</pre></div>
</div>
</div>
</div>
<p>Lowercasing all the words in the dataset. We use the in built python function of.lower for this operation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>df = pd.read_csv(&#39;../data/cleaned_data.csv&#39;)
df[&#39;Customer Review&#39;] = df[&#39;Customer Review&#39;].apply(lambda x: &quot; &quot;.join(x.lower() for x in x.split()))
df[&#39;Customer Review&#39;]
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       excellent and highly recommended! we only spen...
1       this was our favourite hotel whilst we visited...
2       we stayed 2 nights at the new delhi oberoi. wh...
3       the very best!! quality of service and food is...
4       the service , food, location, cleanliness is e...
                              ...                        
2891    stayed at the oberoi for a long weekend with f...
2892    the oberoi hotels have established a world-cla...
2893    i&#39;ve been through a few hotels in delhi over t...
2894    this is a beautiful and luxurious hotel. unfor...
2895    hotel is fine and food is good although pricey...
Name: Customer Review, Length: 2896, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Next step is the remove all the punctuation from the dataset. We will use the str.replace and regex matching for this operation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>df[&#39;Customer Review&#39;] = df[&#39;Customer Review&#39;].str.replace(&#39;[^\w\s]&#39;, &#39;&#39;, regex=True)
df[&#39;Customer Review&#39;]
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       excellent highly recommended spent nights left...
1       favourite whilst visited recently refurbished ...
2       stayed 2 nights new upgraded presidential suit...
3       best quality service food notch quality spread...
4       service food location cleanliness excellent be...
                              ...                        
2891    stayed long weekend friends arrived 1am luggag...
2892    hotels established worldclass reputation deser...
2893    ive hotels yearshilton hyatts marriott sofitel...
2894    beautiful luxurious unfortunately price id exp...
2895    fine food good pricey compared competition wat...
Name: Customer Review, Length: 2896, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Letâ€™s first check the 15 of the most common words that appear in the corpus. We will then remove stopwords using the gensim package and then define our custom stopwords</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>freq= pd.Series(&quot; &quot;.join(df[&#39;Customer Review&#39;]).split()).value_counts()[:15]
freq
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>the       17666
and        9939
a          6237
to         6112
was        4742
in         4733
of         4374
is         4095
i          3754
hotel      3377
we         2882
for        2762
at         2615
with       2274
oberoi     2263
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Removing stop words using the gensim package. The package contains a list of stopwords from the english dictionary. This will save us a lot of time of manually defininig every stopword.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import gensim
stop_words = gensim.parsing.preprocessing.STOPWORDS
stop_words
# Remove Stopwords
df[&#39;Customer Review&#39;] = df[&#39;Customer Review&#39;].apply(lambda x: &quot; &quot;.join(x for x in x.split() if x not in stop_words))
freq= pd.Series(&quot; &quot;.join(df[&#39;Customer Review&#39;]).split()).value_counts()[:15]
# Show the most common words after removal of stopwords
freq
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>hotel        3377
oberoi       2263
service      1976
staff        1967
delhi        1755
room         1571
stay         1386
good         1093
food         1072
great        1060
rooms         984
stayed        900
excellent     882
new           866
best          726
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Finally we will provide our very own custom stopwords. For e.g Oberoi, Delhi and hotel are all stopwords in this excercise as they provide no value in topic modelling or sentiment analysis. A few others have also been added below</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>df[&#39;Customer Review&#39;]
custom_stopwords = [&#39;hotel&#39;, &#39;oberoi&#39;, &#39;delhi&#39;, &#39;india&#39;, &#39;oberois&#39;, &#39;city&#39;]
df[&#39;Customer Review&#39;] = df[&#39;Customer Review&#39;].apply(lambda x: &quot; &quot;.join(x for x in x.split() if x not in custom_stopwords))
freq= pd.Series(&quot; &quot;.join(df[&#39;Customer Review&#39;]).split()).value_counts()[:15]
# Show the most common words after removal of stopwords
freq
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>service       1976
staff         1967
room          1571
stay          1386
good          1093
food          1072
great         1060
rooms          984
stayed         900
excellent      882
new            866
best           726
breakfast      702
restaurant     686
hotels         680
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>We will write these cleaned reviews to a CSV file. Next step would be lemmatization of review data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>df.to_csv(&#39;../data/cleaned_reviews_1.csv&#39;, index = False)
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="data_cleaning_script.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Data Pre Processing And Cleaning</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="lemmetization_script.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lemmatizing Review Data</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Aalok Atre<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>